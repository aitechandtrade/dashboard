<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEON HUD</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root { 
            --neon-blue: #00f3ff;
            --neon-pink: #bc13fe;
            --glass: rgba(20, 20, 35, 0.85);
            --border: 1px solid rgba(255, 255, 255, 0.15);
        }
        
        body { 
            margin: 0; padding: 20px; height: 100vh; box-sizing: border-box;
            background: linear-gradient(-45deg, #0f0c29, #302b63, #24243e, #141e30);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: white; font-family: 'Rajdhani', sans-serif;
            display: grid; 
            grid-template-columns: 360px 1fr; 
            grid-template-rows: 160px 140px 1fr; 
            gap: 20px;
        }

        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        .hud-box { 
            background: var(--glass);
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            border: var(--border);
            border-radius: 16px;
            padding: 20px;
            display: flex; flex-direction: column;
            position: relative; overflow: hidden;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
        }
        
        /* CLOCK */
        #clock-box { justify-content: center; align-items: center; border-left: 4px solid var(--neon-blue); }
        #clock { 
            font-family: 'Orbitron', sans-serif; font-size: 4rem; font-weight: 900; 
            text-shadow: 0 0 20px rgba(0, 243, 255, 0.5); margin: 0; line-height: 1;
        }
        #date { font-size: 1.2rem; letter-spacing: 2px; color: var(--neon-blue); text-transform: uppercase; margin-top: 10px; }

        /* MEDIA CONTROLS (NEW) */
        #media-box { border-left: 4px solid var(--neon-pink); justify-content: space-between; }
        
        .media-controls { display: flex; gap: 10px; margin-top: 10px; width: 100%; }
        .ctrl-btn {
            flex: 1; padding: 10px; border: none; border-radius: 6px;
            font-family: 'Orbitron'; font-weight: bold; cursor: pointer;
            transition: 0.2s; color: white;
        }
        .btn-play { background: rgba(0, 243, 255, 0.2); border: 1px solid var(--neon-blue); }
        .btn-pause { background: rgba(188, 19, 254, 0.2); border: 1px solid var(--neon-pink); }
        .ctrl-btn:active { transform: scale(0.95); background: white; color: black; }

        /* NOTES - FIXED LIST */
        #notes-box { grid-row: 3 / 4; border-top: 4px solid #fff; display: flex; flex-direction: column; }
        h3 { margin: 0 0 10px 0; font-family: 'Orbitron'; letter-spacing: 2px; font-size: 1rem; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px; flex-shrink: 0; }
        
        #notes-container { 
            flex-grow: 1; 
            overflow-y: auto; 
            padding-right: 5px; 
            display: flex; 
            flex-direction: column; 
            gap: 8px; /* Spacing between notes */
        }
        
        .note { 
            background: rgba(255,255,255,0.08); padding: 12px; border-radius: 8px; 
            border-left: 2px solid var(--neon-blue); font-size: 1.1rem; line-height: 1.4;
            flex-shrink: 0; /* Prevents squishing */
        }

        /* CALENDAR */
        #calendar-box { grid-column: 2 / 3; grid-row: 1 / 4; padding: 0; border: none; background: transparent; }
        iframe { width: 100%; height: 100%; border-radius: 16px; border: 1px solid rgba(255,255,255,0.1); filter: invert(1) hue-rotate(180deg) contrast(0.9) brightness(0.9); }
    </style>
</head>
<body>

    <div class="hud-box" id="clock-box">
        <div id="clock">12:00</div>
        <div id="date">LOADING...</div>
    </div>

    <div class="hud-box" id="media-box">
        <div style="font-family:'Orbitron'; color:var(--neon-pink);">REMOTE CONTROL</div>
        <div id="media-status" style="font-size:0.8rem; color:#aaa; margin-bottom:5px;">CONNECTED TO LAPTOP</div>
        
        <div class="media-controls">
            <button class="ctrl-btn btn-pause" onclick="remoteCmd('pause')">PAUSE</button>
            <button class="ctrl-btn btn-play" onclick="remoteCmd('play')">PLAY</button>
        </div>
    </div>

    <div class="hud-box" id="notes-box">
        <h3>MISSION LOG</h3>
        <div id="notes-container">
            </div>
    </div>

    <div class="hud-box" id="calendar-box">
        <iframe src="https://calendar.google.com/calendar/embed?src=abdullahimtiazalishaikh%40gmail.com&ctz=Asia%2FDubai&showTitle=0&showNav=0&showDate=0&showPrint=0&showTabs=0&showCalendars=0"></iframe>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
        import { getDatabase, ref, onValue, set } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDC33-WXrZ50uHjjLlW9qhwT7REdSQ6M3s",
            authDomain: "mydashboard-13727.firebaseapp.com",
            databaseURL: "https://mydashboard-13727-default-rtdb.firebaseio.com",
            projectId: "mydashboard-13727",
            storageBucket: "mydashboard-13727.firebasestorage.app",
            messagingSenderId: "389525920980",
            appId: "1:389525920980:web:902256a3b7ca93b657ef41"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // 1. Send Remote Commands
        window.remoteCmd = (action) => {
            set(ref(db, 'media'), { action: action, timestamp: Date.now() });
        };

        // 2. Clock Logic
        setInterval(() => {
            const now = new Date();
            let h = now.getHours();
            const ampm = h >= 12 ? 'PM' : 'AM';
            h = h % 12; h = h ? h : 12; 
            const m = now.getMinutes().toString().padStart(2, '0');
            document.getElementById('clock').innerText = `${h}:${m} ${ampm}`;
            document.getElementById('date').innerText = now.toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' });
        }, 1000);

        // 3. Notes Sync (Correct Layout)
        onValue(ref(db, 'notes'), (snap) => {
            const container = document.getElementById('notes-container');
            container.innerHTML = ''; 
            if(snap.exists()) {
                const notes = [];
                snap.forEach(child => notes.push(child.val())); 
                // Reverse so newest is at the TOP
                notes.reverse().forEach(txt => {
                    const d = document.createElement('div');
                    d.className = 'note';
                    d.innerText = txt;
                    container.appendChild(d);
                });
            }
        });
    </script>
</body>
</html>
